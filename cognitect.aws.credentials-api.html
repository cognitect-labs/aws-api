<html>
  <head>
    <title>cognitect.aws.credentials - aws-api API documentation</title>
    <link rel="icon" href="static/favicon.png" />
    <link rel="shortcut icon" href="static/favicon.png" />
    <link rel="stylesheet" href="static/clojure.css" type="text/css" media="all" />
    <link rel="stylesheet" href="static/wiki.css" type="text/css" media="all" />
    <link rel="stylesheet" href="static/internal.css" type="text/css" media="all" />
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a href="index.html" id="Logo"><img src="static/clojure-icon.gif" width="100" height="100" alt="Clojure" /></a>
	<h1><a href="index.html" id="page-header" title="page header title">aws-api</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <span class="toc-header"><span id="project-name">aws-api</span> <span id="version"></span> API</span><br />
    <ul>
      <li><a href="index.html" class="wiki_link">Overview</a></li>
      <li><a href="api-index.html" class="wiki_link">API Index</a></li>
    </ul>
    <div class="NamespaceTOC">
      <span class="toc-header">Namespaces</span>
      <ul id="left-sidebar-list">
        <li><a class="wiki_link" href="cognitect.aws.client.api-api.html">cognitect.aws.client.api</a></li><li><a class="wiki_link" href="cognitect.aws.client.shared-api.html">cognitect.aws.client.shared</a></li><li><a class="wiki_link" href="cognitect.aws.client.test-double-api.html">cognitect.aws.client.test-double</a></li><li><a class="wiki_link" href="cognitect.aws.credentials-api.html">cognitect.aws.credentials</a></li><li><a class="wiki_link" href="cognitect.aws.http.default-api.html">cognitect.aws.http.default</a></li><li><a class="wiki_link" href="cognitect.aws.region-api.html">cognitect.aws.region</a></li><li><a class="wiki_link" href="cognitect.aws.retry-api.html">cognitect.aws.retry</a></li>
      </ul>
    </div>
    
    <a class="wiki_link" href="http://clojure.org">Clojure Home</a>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div class="wiki wikiPage" id="content_view">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div class="toc-section" style="margin-left: 1em;">
    <a href="#toc0">Overview</a>
    <div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/auto-refreshing-credentials">auto-refreshing-credentials</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/basic-credentials-provider">basic-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/cached-credentials-with-auto-refresh">cached-credentials-with-auto-refresh</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/calculate-ttl">calculate-ttl</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/chain-credentials-provider">chain-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/container-credentials-provider">container-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/default-credentials-provider">default-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/environment-credentials-provider">environment-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/fetch">fetch</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/fetch-async">fetch-async</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/instance-profile-IMDSv2-credentials-provider">instance-profile-IMDSv2-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/instance-profile-credentials-provider">instance-profile-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/profile-credentials-provider">profile-credentials-provider</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/stop">stop</a>
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#cognitect.aws.credentials/system-property-credentials-provider">system-property-credentials-provider</a>
    </div>
    <br />
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="namespace-name">cognitect.aws.credentials</span>
  - <span id="header-project">aws-api</span> <span id="header-version"></span>
  </h1>

<br />Full namespace name: <span id="long-name">cognitect.aws.credentials</span>
<p></p>
<h2>Overview</h2>
<pre id="namespace-docstr">Contains credentials providers and helpers for discovering credentials.

Alpha. Subject to change.</pre>


<br />
<h2>Public Variables and Functions</h2>
<div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/auto-refreshing-credentials">auto-refreshing-credentials</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (auto-refreshing-credentials provider)
       (auto-refreshing-credentials provider scheduler)
</pre>
  <pre id="var-docstr">Deprecated. Use cached-credentials-with-auto-refresh</pre>
  
  <span class="var-deprecated"><span id="content">Deprecated since aws-api version true</span><br /></span>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/basic-credentials-provider">basic-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (basic-credentials-provider {:keys [access-key-id secret-access-key]})
</pre>
  <pre id="var-docstr">Given a map with :access-key-id and :secret-access-key,
returns an implementation of CredentialsProvider which returns
those credentials on fetch.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/cached-credentials-with-auto-refresh">cached-credentials-with-auto-refresh</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (cached-credentials-with-auto-refresh provider)
       (cached-credentials-with-auto-refresh provider scheduler)
</pre>
  <pre id="var-docstr">Returns a CredentialsProvider which wraps `provider`, caching
credentials returned by `fetch`, and auto-refreshing the cached
credentials in a background thread when the credentials include a
::ttl.

Call `stop` to cancel future auto-refreshes.

The default ScheduledExecutorService uses a ThreadFactory that
spawns daemon threads. You can override this by providing your own
ScheduledExecutorService.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/calculate-ttl">calculate-ttl</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (calculate-ttl {:keys [Expiration]})
</pre>
  <pre id="var-docstr">Primarily for internal use, returns time to live (ttl, in seconds),
based on `:Expiration` in credentials.  If `credentials` contains no
`:Expiration`, defaults to 3600.

`:Expiration` can be a string parsable by java.time.Instant/parse
(returned by ec2/ecs instance credentials), a java.util.Date
(returned from :AssumeRole on aws sts client), a numeric value
representing milliseconds since the epoch of 1970-01-01T00:00:00Z,
or an Instant object.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/chain-credentials-provider">chain-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (chain-credentials-provider providers)
</pre>
  <pre id="var-docstr">Returns a credentials-provider which chains together multiple
credentials providers.

`fetch` calls each provider in order until one returns a non-nil
result. This provider is then cached for future calls to `fetch`.

`fetch` returns nil if none of the providers return credentials.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/container-credentials-provider">container-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (container-credentials-provider http-client)
</pre>
  <pre id="var-docstr">For internal use. Do not call directly.

Return credentials from ECS iff one of
AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or
AWS_CONTAINER_CREDENTIALS_FULL_URI is set.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/default-credentials-provider">default-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (default-credentials-provider http-client)
</pre>
  <pre id="var-docstr">Returns a chain-credentials-provider with (in order):

  environment-credentials-provider
  system-property-credentials-provider
  profile-credentials-provider
  container-credentials-provider
  instance-profile-IMDSv2-credentials-provider
  instance-profile-credentials-provider

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/environment-credentials-provider">environment-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (environment-credentials-provider)
</pre>
  <pre id="var-docstr">Return the credentials from the environment variables.

Look at the following variables:
* AWS_ACCESS_KEY_ID      required
* AWS_SECRET_ACCESS_KEY  required
* AWS_SESSION_TOKEN      optional

Returns nil if any of the required variables is blank.

Logs error if one required variable is blank but the other
is not.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/fetch">fetch</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (fetch provider)
</pre>
  <pre id="var-docstr">Return the credentials found by this provider, or nil.

Credentials should be a map with the following keys:

:aws/access-key-id                      string  required
:aws/secret-access-key                  string  required
:aws/session-token                      string  optional
:cognitect.aws.credentials/ttl          number  optional  Time-to-live in seconds</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/fetch-async">fetch-async</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (fetch-async provider)
</pre>
  <pre id="var-docstr">Returns a channel that will produce the result of calling fetch on
the provider.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/instance-profile-IMDSv2-credentials-provider">instance-profile-IMDSv2-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (instance-profile-IMDSv2-credentials-provider http-client)
</pre>
  <pre id="var-docstr">For internal use. Do not call directly.

Return credentials from IMDS v2 enabled EC2 metadata service iff neither of
AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or
AWS_CONTAINER_CREDENTIALS_FULL_URI
is set.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/instance-profile-credentials-provider">instance-profile-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (instance-profile-credentials-provider http-client)
</pre>
  <pre id="var-docstr">For internal use. Do not call directly.

Return credentials from EC2 metadata service iff neither of
AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or
AWS_CONTAINER_CREDENTIALS_FULL_URI
is set.

DEPRECATED use `instance-profile-IMDSv2-credentials-provider`

Alpha. Subject to change.</pre>
  
  <span class="var-deprecated"><span id="content">Deprecated since aws-api version true</span><br /></span>
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/profile-credentials-provider">profile-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (profile-credentials-provider)
       (profile-credentials-provider profile-name)
       (profile-credentials-provider profile-name f)
</pre>
  <pre id="var-docstr">Return credentials in an AWS configuration profile.

Arguments:

profile-name  string  The name of the profile in the file. (default: default)
f             File    The profile configuration file. (default: ~/.aws/credentials)

<a href="https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html">https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html</a>
  Parsed properties:

  aws_access_key        required
  aws_secret_access_key required
  aws_session_token     optional

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/stop">stop</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (stop credentials)
</pre>
  <pre id="var-docstr">Stop auto-refreshing the credentials.

Alpha. Subject to change.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="cognitect.aws.credentials/system-property-credentials-provider">system-property-credentials-provider</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (system-property-credentials-provider)
</pre>
  <pre id="var-docstr">Return the credentials from the system properties.

Look at the following properties:
* aws.accessKeyId  required
* aws.secretKey    required

Returns nil if any of the required properties is blank.

Logs error if one of the required properties is blank but
the other is not.

Alpha. Subject to change. </pre>
  
  
  
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div id="copyright" style="text-align: center;">No copyright info </div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a href="http://www.tomhickey.com" title="Visit Tom Hickey's website.">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>